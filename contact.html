<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="whiteRazorStylesheet.css" />
    <link rel="icon" href="whiteRazorLogo.jpg" />
    <title>White Razor Productions</title>
    <!-- Include jQuery -->
    <!--
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="navToggle.js" type="module" defer></script>
    <script src="subscriptionToggle.js" type="module" defer></script>
    <script src="emailHandler.js" type="module" defer></script>
    -->
    <script defer>
      document.addEventListener("DOMContentLoaded", function () {
        const navToggle = document.querySelector(".nav-toggle");
        const navUl = document.querySelector("nav ul");
        const toggleButton = document.getElementById("toggle");
        const emailInput = document.getElementById("emailer");
        const subText = document.getElementById("sub");
        const thanksText = document.getElementById("thanks");

        // Toggle navigation visibility
        navToggle.addEventListener("click", function () {
          navToggle.classList.toggle("active");
          navUl.classList.toggle("show");
        });

        // jQuery-based subscription toggle
        $("#toggle").click(function () {
          if ($(this).is(":checked")) {
            $(".sub").css("opacity", 0);
            $(".thanks").css("opacity", 1);
          } else {
            $(".sub").css("opacity", 1);
            $(".thanks").css("opacity", 0);
          }
        });
        toggleButton.addEventListener("click", async function () {
          const email = emailInput.value.trim();
          if (!email) return;

          try {
            const fileHandle = await getFileHandle();
            const emails = await readEmails(fileHandle);
            if (!emails.includes(email)) {
              emails.push(email);
              await writeEmails(fileHandle, emails);
              subText.style.display = "none";
              thanksText.style.display = "block";
            }
          } catch (error) {
            console.error("Error handling email:", error);
          }
        });

        emailInput.addEventListener("keypress", function (event) {
          if (event.key === "Enter") {
            event.preventDefault(); // Prevent the default form submission
            toggleButton.click(); // Trigger the submit button click event
          }
        });

        async function getFileHandle() {
          const options = {
            type: "openFile",
            accepts: [
              {
                description: "Text Files",
                extensions: ["txt"],
                mimeTypes: ["text/plain"],
              },
            ],
          };

          let fileHandle;
          try {
            // Try to open the existing file
            [fileHandle] = await window.showOpenFilePicker({
              ...options,
              suggestedName: "whiteRazorEmailer.txt",
            });
          } catch (error) {
            // If the file doesn't exist, create a new one
            fileHandle = await window.showSaveFilePicker({
              ...options,
              suggestedName: "whiteRazorEmailer.txt",
            });
          }
          return fileHandle;
        }

        async function readEmails(fileHandle) {
          try {
            const file = await fileHandle.getFile();
            const contents = await file.text();
            return contents.split("\n").filter((email) => email.trim());
          } catch (error) {
            return [];
          }
        }

        async function writeEmails(fileHandle, emails) {
          const writable = await fileHandle.createWritable();
          await writable.write(emails.join("\n"));
          await writable.close();
        }
      });
    </script>
  </head>
  <body>
    <!-- Content -->

    <header>
      <div class="logo">
        <div class="logoVideo">
          <video
            id="logoVideo"
            width="200"
            height="100"
            src="White Razor Productions LLC Intro logo.mp4"
            autoplay
            muted
            onloadedmetadata="this.currentTime = 0;"
            ontimeupdate="if (this.currentTime >= 8) { this.pause(); this.currentTime = 8; }"
          ></video>
        </div>
        <div class="logoImage">
          <img
            src="whiteRazorLogo.jpg"
            id="logoHeader"
            alt="White Razor Productions logo"
          />
        </div>
      </div>
      <!-- Use a button for the nav toggle for better accessibility -->
      <button class="nav-toggle" aria-label="Toggle navigation">
        Experience White Razor Productions
      </button>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li><a href="whiteRazorServices.html">Services</a></li>
          <li><a href="latest.html">Latest</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <h2>Keep in Touch</h2>
      <div id="subscription">
        <input
          type="text"
          id="emailer"
          title="Email"
          placeholder="Enter your email"
        />
        <div id="submit" class="button">
          <input type="button" id="toggle" title="Subscribe to newsletter" />
          <label class="button" for="toggle"></label>
        </div>
        <div class="text">
          <div id="sub">Subscribe Now</div>
          <div id="thanks">Thanks for Subscribing</div>
        </div>
      </div>
      <!-- Additional Content -->
    </main>
    <footer>
      <div class="share" id="share">
        <div class="shareText" id="shareHeader">
          <h3>Follow us on social media:</h3>
        </div>
        <div class="shareLinks" id="shareLinks">
          <a
            title="Facebook"
            href="https://www.facebook.com/people/White-Razor-Productions/100066410921612/"
            target="_blank"
            rel="noopener noreferrer"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="64"
              height="64"
              viewBox="0 0 24 24"
            >
              <path
                d="M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"
              />
            </svg>
          </a>
          <a
            title="Youtube"
            href="https://www.youtube.com/@whiterazorproduction"
            target="_blank"
            rel="noopener noreferrer"
          >
            <svg
              alt="youtube"
              xmlns="http://www.w3.org/2000/svg"
              width="64"
              height="64"
              viewBox="0 0 24 24"
            >
              <path
                d="M23.5 6.2c-.3-1.2-1.2-2.1-2.3-2.3-2.1-.6-10.7-.6-10.7-.6s-8.5 0-10.7.6c-1.1.3-2 1.2-2.3 2.3-.6 2.1-.6 6.4-.6 6.4s0 4.3.6 6.4c.3 1.2 1.2 2.1 2.3 2.3 2.1.6 10.7.6 10.7.6s8.5 0 10.7-.6c1.2-.3 2.1-1.2 2.3-2.3.6-2.1.6-6.4.6-6.4s0-4.3-.6-6.4zm-14.5 9.6v-7l6.5 3.5-6.5 3.5z"
              />
            </svg>
          </a>
          <a
            title="IMDb"
            href="https://www.imdb.com/name/nm3601510/?ref_=nv_sr_srsg_0/"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img
              width="74"
              height="74"
              src="https://img.icons8.com/glyph-neue/64/imdb.png"
              alt="imdb"
            />
          </a>
        </div>
      </div>
      <div id="logoContainer">
        <img
          src="whiteRazorLogo.jpg"
          id="logoFooter"
          alt="White Razor Productions logo"
        />
      </div>
      <div id="references">
        <p>
          <a href="https://icons8.com/icon/P9HjgGcVghd2/imdb">IMDb</a> icon by
          <a href="https://icons8.com">Icons8</a> <br />Additional SVG icon
          images from Iconmonstr<br />
          <a
            title="Iconmonstr"
            href="https://iconmonstr.com/"
            target="_blank"
            rel="noopener noreferrer"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="44"
              height="44"
              viewBox="0 0 24 24"
            >
              <path
                d="M16.5 2.75c-.965 0-1.75.785-1.75 1.75s.785 1.75 1.75 1.75 1.75-.785 1.75-1.75-.785-1.75-1.75-1.75zm0-2.75c2.481 0 4.5 2.019 4.5 4.5s-2.019 4.5-4.5 4.5-4.5-2.019-4.5-4.5 2.019-4.5 4.5-4.5zm-5.5 17.01s2.539 3.087 4.022 4.944c1.163 1.454 2.025 2.046 3.462 2.046 1.411 0 2.516-1.065 2.516-2.309 0-.539-.183-1.111-.594-1.646-1.52-1.973-2.406-3.035-2.406-3.035h-7zm-3.136-.01h-2.864c-.551 0-1-.449-1-1s.449-1 1-1h13.279c.893 0 1.4.248 1.963.958.96 1.211 2.505 3.163 2.562 3.251.736-.87 1.196-1.98 1.196-3.209 0-2.761-2.239-5-5-5h-14c-2.761 0-5 2.239-5 5s2.239 5 5 5h6.141c-1.144-1.405-3.277-4-3.277-4zm.05-12.5l2.086 2.086-1.414 1.414-2.086-2.086-2.086 2.086-1.414-1.414 2.086-2.086-2.086-2.086 1.414-1.414 2.086 2.086 2.086-2.086 1.414 1.414-2.086 2.086z"
              />
            </svg>
          </a>
          <br />&copy; 2023 White Razor Productions. All rights reserved.
        </p>
      </div>
    </footer>
    <div class="text" id="footerText">
      <p>
        White Razor Productions is a full-service company specializing in video
        production and photography. We are dedicated to providing clients with
        the highest quality of work and customer service. Working with you every
        step of the way to ensure that your vision is brought to life. Whether
        you are looking to create a commercial, music video, promotional video,
        or other personal event, we have the skills and expertise to make it
        happen.
      </p>
    </div>
  </body>
</html>
